import { HandlerDefinition } from '../../types'

const hideEvent = new KeyboardEvent('keydown', {
    key: '\\',
})

function hide(event: Event): void {
    if (document.getElementById('app-fuk-u')?.style.display == 'none') return

    document.dispatchEvent(hideEvent)
}

function autohide() {
    window.addEventListener('blur', hide)
}

function disableAutohide() {
    window.removeEventListener('blur', hide)
}

let definition: HandlerDefinition = {
    type: 'module',
    id: 'autohide',
    onEnable: autohide,
    onDisable: disableAutohide,
}

export default definition
